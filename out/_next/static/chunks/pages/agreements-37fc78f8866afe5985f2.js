_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[30],{"43wv":function(e,t,n){"use strict";var a=n("rePB");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s={user:null,loggedIn:!1,authenticatingUser:!1,failedLogin:!1,error:null};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return i(i({},e),{},{user:t.payload,error:null,loggedIn:!0,authenticatingUser:!1});case"AUTHENTICATING_USER":return i(i({},e),{},{authenticatingUser:!0});case"AUTHENTICATED_USER":return i(i({},e),{},{authenticatingUser:!1});case"FAILED_LOGIN":return i(i({},e),{},{failedLogin:!0,error:t.payload,authenticatingUser:!1});case"LOGOUT_USER":return i(i({},e),{},{user:null,loggedIn:!1,authenticatingUser:!1,failedLogin:!1,error:null});default:return e}}},Fo1f:function(e,t,n){"use strict";n.r(t);var a=n("o0o1"),c=n.n(a),i=n("HaE+"),s=n("1OyB"),r=n("vuIU"),o=n("JX7q"),u=n("Ji7U"),l=n("md7G"),d=n("foSv"),h=n("nKUr"),f=n("q1tI"),p=n.n(f),m=n("nOHt"),j=n.n(m),g=n("vDqi"),b=n.n(g),v=n("GUC0"),O=n.n(v),y=n("8Kt/"),x=n.n(y),k=n("5JmO"),S=n.n(k),N=n("TruH"),w=n.n(N),C=(n("tNPP"),n("uuUm"),n("Otl1"),n("uJQ+"),n("43wv"),n("rePB"));function _(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(d.a)(e);if(t){var c=Object(d.a)(this).constructor;n=Reflect.construct(a,arguments,c)}else n=a.apply(this,arguments);return Object(l.a)(this,n)}}var P=function(e){Object(u.a)(n,e);var t=_(n);function n(e){var a;return Object(s.a)(this,n),a=t.call(this,e),Object(C.a)(Object(o.a)(a),"takePhoto",(function(){a.setState({isCameraVisible:!1});var e=a.canvas.getContext("2d");a.canvas.width=a.videoPlayer.videoWidth,a.canvas.height=a.videoPlayer.videoHeight,e.drawImage(a.videoPlayer,0,0,a.canvas.width,a.canvas.height)})),Object(C.a)(Object(o.a)(a),"takePhotoAgain",(function(){a.setState({isCameraVisible:!0})})),Object(C.a)(Object(o.a)(a),"startVerification",(function(){setTimeout((function(){a.setState({isCameraVisible:!0,isPreload:!1}),setTimeout((function(){a.setState({isScanning:!0}),setTimeout((function(){a.setState({isScanning:!1,isVerificationSecond:!0}),setTimeout((function(){a.setState({isVerificationSecond:!1,isScanning:!0}),setTimeout((function(){a.setState({isScanning:!1,isVerificationThird:!0}),setTimeout((function(){a.setState({isScanning:!0}),setTimeout((function(){a.setState({isScanning:!1,isVerificationThird:!1,isVerificationCompleted:!0})}),1e3)}),2e3)}),1e3)}),2e3)}),1e3)}),2e3)}),1e3)})),Object(C.a)(Object(o.a)(a),"sendPhoto",(function(){var e=a.props.sendFile;a.canvas.toBlob(e)})),a.state={isCameraVisible:!1,isVerificationCompleted:!1,isScanning:!1,isVerificationSecond:!1,isVerificationThird:!1,isPreload:!0},a}return Object(r.a)(n,[{key:"processDevices",value:function(e){var t=this;e.forEach((function(e){t.setDevice(e)}))}},{key:"setDevice",value:function(){var e=Object(i.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.deviceId,e.next=3,navigator.mediaDevices.getUserMedia({audio:!1,video:{deviceId:n}});case 3:return this.videoPlayer.srcObject=e.sent,e.next=6,this.videoPlayer.play();case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.enumerateDevices();case 2:t=e.sent,this.processDevices(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"c-camera-feed",children:[Object(h.jsxs)("div",{className:"c-camera-feed__preload ".concat(this.state.isPreload?"":"d-none"),children:[Object(h.jsx)("p",{children:"\u0412\u0430\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0440\u043e\u0439\u0442\u0438 \u0432\u0435\u0440\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044e"}),Object(h.jsx)("button",{onClick:this.startVerification,children:"\u041d\u0430\u0447\u0430\u0442\u044c \u0432\u0435\u0440\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044e"})]}),Object(h.jsxs)("div",{className:"c-camera-feed--holder ".concat(this.state.isCameraVisible&&!this.state.isPreload?"":"d-none"),children:[Object(h.jsxs)("div",{className:"c-camera-feed__viewer",children:[Object(h.jsx)("video",{ref:function(t){return e.videoPlayer=t},width:"100%",height:"100%"}),Object(h.jsx)("div",{className:"face-id ".concat(this.state.isVerificationCompleted?"d-none":""),children:Object(h.jsx)("div",{className:"face-id__frame ".concat(this.state.isVerificationThird?"scale-smaller":""),children:Object(h.jsx)("div",{className:"face-id__scanner ".concat(this.state.isScanning?"":"d-none")})})})]}),Object(h.jsx)("p",{className:"face-id__text ".concat(this.state.isVerificationCompleted?"d-none":""),children:this.state.isVerificationSecond?"\u0423\u043b\u044b\u0431\u043d\u0438\u0442\u0435\u0441\u044c":this.state.isVerificationThird?"\u041e\u0442\u0434\u0430\u043b\u0438\u0442\u0435\u0441\u044c":"\u041f\u043e\u043c\u0435\u0441\u0442\u0438\u0442\u0435 \u043b\u0438\u0446\u043e \u0432 \u0440\u0430\u043c\u043a\u0443"}),Object(h.jsx)("button",{className:"".concat(this.state.isVerificationCompleted?"":"d-none"),onClick:this.takePhoto,children:"\u0421\u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]}),Object(h.jsxs)("div",{className:"c-camera-feed--holder ".concat(this.state.isCameraVisible||this.state.isPreload?"d-none":""),children:[Object(h.jsx)("div",{className:"c-camera-feed__stage",children:Object(h.jsx)("canvas",{className:"canvas",height:"100%",ref:function(t){return e.canvas=t}})}),Object(h.jsxs)("div",{className:"d-flex justify-content-between w-100",children:[Object(h.jsx)("button",{onClick:this.takePhotoAgain,children:"\u041f\u0435\u0440\u0435\u0441\u043d\u044f\u0442\u044c"}),Object(h.jsx)("button",{onClick:this.sendPhoto,children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e"})]})]})]})}}]),n}(f.Component),T=n("DCcX"),R=n("vkoW"),I=n("CaDr"),U=n("/MKj"),D=n("toLX");function V(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(d.a)(e);if(t){var c=Object(d.a)(this).constructor;n=Reflect.construct(a,arguments,c)}else n=a.apply(this,arguments);return Object(l.a)(this,n)}}S.a.vfs=w.a.pdfMake.vfs,S.a.fonts={TimesNewRoman:{normal:"TimesNewRoman.ttf",bold:"TimesNewRomanBold.ttf",italics:"TimesNewRomanItalics.ttf",bolditalics:"TimesNewRomanBoldItalics.ttf"},emptyCheckbox:{normal:"emptyCheckbox.ttf"}};var E=function(e){Object(u.a)(a,e);var t=V(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={token:null,loading:!1,docs:[],id:null,id_req:null,sign:"",isCodeSent:!1,code_conf:null,errorInCode:null,phone:null,rest:null,isModalOpen:!0},n.toggleModal=n.toggleModal.bind(Object(o.a)(n)),n.uploadImage=n.uploadImage.bind(Object(o.a)(n)),n}return Object(r.a)(a,[{key:"getUserDocument",value:function(){var e=Object(i.a)(c.a.mark((function e(t){var n=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,b.a.get("https://api.money-men.kz/api/getData?token=".concat(t)).then((function(e){e.data.success?n.setState({docs:e.data.docs,id:e.data.id,id_req:e.data.id_req,loading:!1,rest:e.data.rest,phone:e.data.phone}):j.a.push("/")})).catch((function(e){n.setState({loading:!1}),j.a.push("/")}));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCode",value:function(){var e=Object(i.a)(c.a.mark((function e(){var t=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("https://api.money-men.kz/api/sendSms?phone=".concat(this.state.phone),{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){e.success&&t.setState({isCodeSent:!0})})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sendAgreementStatusForRest",value:function(){var e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===this.state.code_conf){e.next=3;break}return e.next=3,b.a.get("https://api.money-men.kz/api/sendSms",{params:{id:this.state.id,phone:this.state.phone,token:this.state.token,id_req:this.state.id_req,code:this.state.code_conf,sign:"y"}},{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){e.success&&O()("\u0423\u0441\u043f\u0435\u0448\u043d\u043e!","".concat(e.message),"success").then((function(){j.a.push("/")}))})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sendAgreementStatusWithRest",value:function(){var e=this;this.setState({loading:!0}),b.a.get("https://api.money-men.kz/api/prolongationAgreement?sign=y&request_id=".concat(this.state.id)).then((function(t){e.setState({loading:!1}),t.data.success&&O()("\u0423\u0441\u043f\u0435\u0448\u043d\u043e!","success").then((function(){j.a.push("/")}))})).catch((function(t){e.setState({loading:!1}),console.log(t),j.a.push("/")}))}},{key:"sendAgreementStatus",value:function(){var e=Object(i.a)(c.a.mark((function e(){var t=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({loading:!0});try{b.a.get("https://api.money-men.kz/api/agreement",{params:{id:this.state.id,phone:this.state.phone,token:this.state.token,id_req:this.state.id_req,sign:"y"}}).then((function(e){t.setState({loading:!1}),e.data.success&&O()("\u0423\u0441\u043f\u0435\u0448\u043d\u043e!","\u041d\u0430\u0448\u0438 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0441\u0442\u044b \u0441\u0432\u044f\u0436\u0443\u0442\u0441\u044f \u0441 \u0412\u0430\u043c\u0438 \u0432 \u0442\u0435\u0447\u0435\u043d\u0438\u0438 15 \u043c\u0438\u043d\u0443\u0442").then((function(){j.a.push("/")}))}))}catch(n){this.setState({loading:!1}),console.log(n),j.a.push("/")}case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleModal",value:function(){this.setState({isModalOpen:!this.state.isModalOpen})}},{key:"uploadImage",value:function(){var e=Object(i.a)(c.a.mark((function e(t){var n,a,i,s=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=new FormData).append("iin",null===(n=this.props.userReducer.user)||void 0===n?void 0:n.UF_4),i.append("leadID",null===(a=this.props.userReducer.user)||void 0===a?void 0:a.UF_1),i.append("photo",t),i.append("fileName","image.png"),i.append("extension","png"),this.setState({loading:!0}),e.next=9,b.a.post("http://178.170.221.75/biometria/public/api/comparePhotos",i).then((function(e){e.data.similarity>82?O()("\u0412\u0435\u0440\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0439\u0434\u0435\u043d\u0430","\u041c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b","success").then((function(){s.setState({isModalOpen:!1})})):O()("\u0412\u0435\u0440\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f \u043d\u0435 \u043f\u0440\u043e\u0439\u0434\u0435\u043d\u0430","\u0424\u043e\u0442\u043e \u043d\u0435 \u043f\u0440\u043e\u0448\u043b\u043e \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437","error").then((function(){j.a.push("/")}))})).catch((function(e){console.log(e),O()("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043f\u044b\u0442\u043a\u0435 \u0432\u0435\u0440\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438","\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437","error").then((function(){j.a.push("/")}))})).finally((function(){s.setState({loading:!1})}));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"container otherPages",children:[Object(h.jsx)("div",{className:"modelLoader ".concat(this.state.isCameraLoading?"":"d-none")}),Object(h.jsxs)(T.a,{isOpen:this.state.isModalOpen,class:"modal modal-calculator",size:"lg",children:[Object(h.jsx)(R.a,{children:"\u0412\u0435\u0440\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f"}),Object(h.jsx)(I.a,{children:Object(h.jsx)(P,{sendFile:this.uploadImage})})]}),Object(h.jsx)(x.a,{children:Object(h.jsx)("title",{children:"\u0421\u043e\u0433\u043b\u0430\u0448\u0435\u043d\u0438\u0435"})}),this.state.loading?Object(h.jsx)("div",{className:"modelLoader"}):Object(h.jsx)("div",{className:"modelLoader loaded",children:" "}),Object(h.jsx)("div",{className:"row justify-content-center",children:Object(h.jsx)("div",{className:"col-md-12",children:Object(h.jsxs)("div",{className:"agreements-block",children:[Object(h.jsx)("h4",{align:"center",children:"\u0421\u043e\u0433\u043b\u0430\u0448\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),Object(h.jsx)("ul",{className:"complete",children:this.state.docs.map((function(e){return Object(h.jsxs)("li",{className:null===e.link?"d-none":"",children:[Object(h.jsx)("img",{className:"checkedComplete",src:n("jI6F")}),Object(h.jsx)("a",{href:e.link,target:"_blank",children:e.name})]})}))}),Object(h.jsx)("div",{className:"repeatBtn form-group",children:!0===this.state.rest?Object(h.jsx)("button",{onClick:function(){return e.sendAgreementStatusWithRest()},className:"mt-5",children:"\u0421\u043e\u0433\u043b\u0430\u0448\u0430\u044e\u0441\u044c"}):Object(h.jsx)("button",{onClick:function(){return e.sendAgreementStatus()},className:"mt-5",children:"\u0421\u043e\u0433\u043b\u0430\u0448\u0430\u044e\u0441\u044c"})})]})})})]})}}]),a}(p.a.Component);t.default=Object(D.a)(Object(U.connect)((function(e){return{userReducer:e.userReducer}}))(E))},RVGb:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/agreements",function(){return n("Fo1f")}])},jI6F:function(e,t){e.exports="/_next/static/images/checked-542f69ac8fd42a1c46953a5547bba55d.png"},toLX:function(e,t,n){"use strict";var a=n("1OyB"),c=n("vuIU"),i=n("Ji7U"),s=n("md7G"),r=n("foSv"),o=n("nKUr"),u=n("q1tI"),l=n.n(u),d=n("/MKj"),h=n("nOHt"),f=n.n(h),p=n("w18f"),m=n("p46w"),j=n.n(m);function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(r.a)(e);if(t){var c=Object(r.a)(this).constructor;n=Reflect.construct(a,arguments,c)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}t.a=function(e){var t=function(t){Object(i.a)(s,t);var n=g(s);function s(){return Object(a.a)(this,s),n.apply(this,arguments)}return Object(c.a)(s,[{key:"componentDidMount",value:function(){j.a.get("token")&&!this.props.loggedIn?this.props.fetchCurrentUser():j.a.get("token")||f.a.push("/login")}},{key:"render",value:function(){return j.a.get("token")&&this.props.loggedIn?Object(o.jsx)(e,{}):!j.a.get("token")||!this.props.authenticatingUser&&this.props.loggedIn?Object(o.jsxs)("div",{className:"otherPages",children:[Object(o.jsx)("div",{className:"modelLoader"}),Object(o.jsx)("h2",{className:"text-center pt-5",children:"\u0412\u0440\u0435\u043c\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u0441\u0435\u0430\u043d\u0441\u0430 \u0438\u0441\u0442\u0435\u043a\u043b\u043e"})]}):Object(o.jsxs)("div",{className:"otherPages",children:[Object(o.jsx)("div",{className:"pd-5 pt-5"}),Object(o.jsx)("div",{className:"modelLoader"})]})}}]),s}(l.a.Component);return Object(d.connect)((function(e){return{loggedIn:e.userReducer.loggedIn,authenticatingUser:e.userReducer.authenticatingUser}}),p)(t)}},vkoW:function(e,t,n){"use strict";var a=n("wx14"),c=n("zLVn"),i=n("q1tI"),s=n.n(i),r=n("17x9"),o=n.n(r),u=n("TSYQ"),l=n.n(u),d=n("33Jr"),h={tag:d.o,wrapTag:d.o,toggle:o.a.func,className:o.a.string,cssModule:o.a.object,children:o.a.node,closeAriaLabel:o.a.string,charCode:o.a.oneOfType([o.a.string,o.a.number]),close:o.a.object},f=function(e){var t,n=e.className,i=e.cssModule,r=e.children,o=e.toggle,u=e.tag,h=e.wrapTag,f=e.closeAriaLabel,p=e.charCode,m=e.close,j=Object(c.a)(e,["className","cssModule","children","toggle","tag","wrapTag","closeAriaLabel","charCode","close"]),g=Object(d.k)(l()(n,"modal-header"),i);if(!m&&o){var b="number"===typeof p?String.fromCharCode(p):p;t=s.a.createElement("button",{type:"button",onClick:o,className:Object(d.k)("close",i),"aria-label":f},s.a.createElement("span",{"aria-hidden":"true"},b))}return s.a.createElement(h,Object(a.a)({},j,{className:g}),s.a.createElement(u,{className:Object(d.k)("modal-title",i)},r),m||t)};f.propTypes=h,f.defaultProps={tag:"h5",wrapTag:"div",closeAriaLabel:"Close",charCode:215},t.a=f}},[["RVGb",0,1,12,15,17,2,3,4,5,6,8,10,13,16]]]);