_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[44],{Eo8B:function(e,t,n){"use strict";n.r(t);var a=n("o0o1"),r=n.n(a),c=n("HaE+"),i=n("rePB"),s=n("1OyB"),o=n("vuIU"),d=n("Ji7U"),l=n("md7G"),u=n("foSv"),h=n("nKUr"),p=n("q1tI"),m=n.n(p),f=n("nOHt"),j=n.n(f),b=n("vDqi"),g=n.n(b),O=n("GUC0"),v=n.n(O),k=n("8Kt/"),x=n.n(k),N=n("tNPP"),w=n("uuUm"),y=n("Otl1"),C=n("uJQ+");function _(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(l.a)(this,n)}}function D(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}var S=function(e){Object(d.a)(a,e);var t=_(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state=Object(i.a)({token:null,loading:!1,docs:[],id:null,id_req:null,sign:"",isCodeSent:!1,code_conf:null,errorInCode:null,phone:null,rest:null,fio:null,dateOfBirth:null,address:null,email:null,placeOfWork:null,position:null,iin:null,cardNumber:null,startCard:null,endCard:null,placeOfBirth:null,insuranceAmount:null,givenDate:null,code:null,period:null,contractNumber:null,reward:null,main:null,total:null,cardGiven:null,iban:null,phone2:null,endDate:null},"endDate",null),n}return Object(o.a)(a,[{key:"getUserDocument",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var n=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,g.a.get("https://api.money-men.kz/api/newGetData?token=".concat(t)).then((function(e){e.data.success?n.setState({docs:e.data.docs,id:e.data.id,id_req:e.data.id_req,loading:!1,rest:e.data.rest,phone2:e.data.phone,fio:e.data.fio,dateOfBirth:e.data.birthday,address:e.data.address,email:e.data.email,placeOfWork:e.data.work,position:e.data.position,iin:e.data.iin,cardNumber:e.data.cardNumber,startCard:e.data.cardDate,endCard:e.data.cardExpiration,placeOfBirth:e.data.placeOfBirth,insuranceAmount:e.data.insuranceAmount,givenDate:e.data.givenDate,code:e.data.code,period:e.data.period,contractNumber:e.data.contractNumber,reward:e.data.reward,main:e.data.main,total:e.data.main+e.data.reward,cardGiven:e.data.cardGiven,iban:e.data.iban,endDate:e.data.datePayment}):j.a.push("/")})).catch((function(e){n.setState({loading:!1}),j.a.push("/")}));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCode",value:function(){var e=Object(c.a)(r.a.mark((function e(){var t=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("https://api.money-men.kz/api/sendSms?phone=".concat(this.state.phone),{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){e.success&&t.setState({isCodeSent:!0})})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sendAgreementStatusForRest",value:function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===this.state.code_conf){e.next=3;break}return e.next=3,g.a.get("https://api.money-men.kz/api/sendSms",{params:{id:this.state.id,phone:this.state.phone,token:this.state.token,id_req:this.state.id_req,code:this.state.code_conf,sign:"y"}},{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){e.success&&v()("\u0423\u0441\u043f\u0435\u0448\u043d\u043e!","".concat(e.message),"success").then((function(){j.a.push("/")}))})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sendAgreementStatusWithRest",value:function(){var e=this;this.setState({loading:!0}),g.a.get("https://api.money-men.kz/api/prolongationAgreement?sign=y&request_id=".concat(this.state.id)).then((function(t){e.setState({loading:!1}),t.data.success&&v()("\u0423\u0441\u043f\u0435\u0448\u043d\u043e!","success").then((function(){j.a.push("/")}))})).catch((function(t){e.setState({loading:!1}),console.log(t),j.a.push("/")}))}},{key:"sendAgreementStatus",value:function(){var e=Object(c.a)(r.a.mark((function e(){var t=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({loading:!0});try{g.a.get("https://api.money-men.kz/api/agreementNew ",{params:{id:this.state.id,phone:this.state.phone,token:this.state.token,id_req:this.state.id_req,sign:"y"}}).then((function(e){t.setState({loading:!1}),e.data.success&&v()("\u0423\u0441\u043f\u0435\u0448\u043d\u043e!","\u041d\u0430\u0448\u0438 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0441\u0442\u044b \u0441\u0432\u044f\u0436\u0443\u0442\u0441\u044f \u0441 \u0412\u0430\u043c\u0438 \u0432 \u0442\u0435\u0447\u0435\u043d\u0438\u0438 15 \u043c\u0438\u043d\u0443\u0442").then((function(){j.a.push("/")}))}))}catch(n){this.setState({loading:!1}),console.log(n),j.a.push("/")}case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){0===D("token").length?j.a.push("/"):this.setState({token:D("token")}),this.getUserDocument(0!==D("token").length?D("token"):null)}},{key:"render",value:function(){var e=this,t=this.state,a=t.fio,r=t.dateOfBirth,c=t.address,i=t.email,s=t.placeOfWork,o=t.position,d=t.iin,l=t.cardNumber,u=t.startCard,p=t.endCard,m=t.placeOfBirth,f=t.insuranceAmount,j=t.givenDate,b=t.code,g=t.period,O=t.contractNumber,v=t.reward,k=t.main,_=t.total,D=t.cardGiven,S=t.iban,A=t.phone2;return Object(h.jsxs)("div",{className:"container otherPages",children:[Object(h.jsx)(x.a,{children:Object(h.jsx)("title",{children:"\u0421\u043e\u0433\u043b\u0430\u0448\u0435\u043d\u0438\u0435"})}),this.state.loading?Object(h.jsx)("div",{className:"modelLoader"}):Object(h.jsx)("div",{className:"modelLoader loaded",children:" "}),Object(h.jsx)("div",{className:"row justify-content-center",children:Object(h.jsx)("div",{className:"col-md-12",children:Object(h.jsxs)("div",{className:"agreements-block",children:[Object(h.jsx)("h4",{align:"center",children:"\u0421\u043e\u0433\u043b\u0430\u0448\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),Object(h.jsxs)("ul",{className:"complete",children:[Object(h.jsxs)("li",{children:[Object(h.jsx)("img",{className:"checkedComplete",src:n("jI6F")}),Object(h.jsx)(N.a,{fio:a,dateOfBirth:r,address:c,phone:A,email:i,placeOfWork:s,position:o,iin:d,cardNumber:l,startCard:u,endCard:p,placeOfBirth:m,insuranceAmount:f,givenDate:j,code:b,period:g})]}),Object(h.jsxs)("li",{children:[Object(h.jsx)("img",{className:"checkedComplete",src:n("jI6F")}),Object(h.jsx)(w.a,{fio:a,dateOfBirth:r,address:c,iin:d,cardNumber:l,contractNumber:O,insuranceAmount:f,code:b,period:g,reward:v})]}),Object(h.jsxs)("li",{children:[Object(h.jsx)("img",{className:"checkedComplete",src:n("jI6F")}),Object(h.jsx)(y.a,{contractNumber:O,givenDate:j,endDate:endDate,fio:a,address:c,phone:A,iin:d,insuranceAmount:f,reward:v,cardNumber:l,cardGiven:D,startCard:u,email:i,period:g})]}),Object(h.jsxs)("li",{children:[Object(h.jsx)("img",{className:"checkedComplete",src:n("jI6F")}),Object(h.jsx)(C.a,{main:k,reward:v,fio:a,iin:d,address:c,cardNumber:l,cardGiven:D,startCard:u,endCard:p,dateOfBirth:r,phone:A,iban:S,email:i,contractNumber:O,givenDate:j,endDate:endDate,total:_,period:g})]})]}),Object(h.jsx)("div",{className:"repeatBtn form-group",children:!0===this.state.rest?Object(h.jsx)("button",{onClick:function(){return e.sendAgreementStatusWithRest()},className:"mt-5",children:"\u0421\u043e\u0433\u043b\u0430\u0448\u0430\u044e\u0441\u044c"}):Object(h.jsx)("button",{onClick:function(){return e.sendAgreementStatus()},className:"mt-5",children:"\u0421\u043e\u0433\u043b\u0430\u0448\u0430\u044e\u0441\u044c"})})]})})})]})}}]),a}(m.a.Component);t.default=S},NYbR:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/newAggrements",function(){return n("Eo8B")}])},jI6F:function(e,t){e.exports="/_next/static/images/checked-542f69ac8fd42a1c46953a5547bba55d.png"}},[["NYbR",0,1,11,13,15,2,3,4,6,16]]]);